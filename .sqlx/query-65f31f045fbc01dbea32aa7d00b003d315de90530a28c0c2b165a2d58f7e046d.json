{
  "db_name": "PostgreSQL",
  "query": "\n        WITH table_cnt AS (\n            SELECT count(*) AS value FROM \"table\" t\n                INNER JOIN tabular ti ON t.table_id = ti.tabular_id\n                INNER JOIN namespace n ON ti.namespace_id = n.namespace_id\n                INNER JOIN warehouse w ON n.warehouse_id = w.warehouse_id\n            WHERE w.warehouse_id = $1 AND w.status = 'active'\n        ),\n        update_tables AS (\n            INSERT INTO scalars (name, statistic_id, value)\n            VALUES ('tables', $1, (SELECT value FROM table_cnt))\n            RETURNING value\n        ),\n        view_cnt AS (\n            SELECT count(*) AS value FROM \"view\" v\n                INNER JOIN tabular vi ON v.view_id = vi.tabular_id\n                INNER JOIN namespace n ON vi.namespace_id = n.namespace_id\n                INNER JOIN warehouse w ON n.warehouse_id = w.warehouse_id\n            WHERE w.warehouse_id = $1 AND w.status = 'active'\n        ),\n        update_views AS (\n            INSERT INTO scalars (name, statistic_id, value)\n            VALUES ('views', $1, (SELECT value FROM view_cnt))\n            RETURNING value\n        )\n        INSERT INTO statistics (statistics_id, warehouse_id) VALUES ($1, $2)\n        RETURNING $1 as \"warehouse_ident!\", (select value from table_cnt) as \"number_of_tables!\", (select value from view_cnt) as \"number_of_views!\"\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "warehouse_ident!",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "number_of_tables!",
        "type_info": "Int8"
      },
      {
        "ordinal": 2,
        "name": "number_of_views!",
        "type_info": "Int8"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid"
      ]
    },
    "nullable": [
      null,
      null,
      null
    ]
  },
  "hash": "65f31f045fbc01dbea32aa7d00b003d315de90530a28c0c2b165a2d58f7e046d"
}
