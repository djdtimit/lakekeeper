{
  "db_name": "PostgreSQL",
  "query": "\n        WITH update_tables AS (\n            INSERT INTO scalars (name, statistic_id, value)\n            VALUES ('tables', $2, (SELECT count(*) AS value FROM \"table\" t\n                INNER JOIN tabular ti ON t.table_id = ti.tabular_id\n                INNER JOIN namespace n ON ti.namespace_id = n.namespace_id\n                INNER JOIN warehouse w ON n.warehouse_id = w.warehouse_id\n            WHERE w.warehouse_id = $1 AND w.status = 'active'))\n            RETURNING value\n        ),\n        update_views AS (\n            INSERT INTO scalars (name, statistic_id, value)\n            VALUES ('views', $2, (SELECT count(*) AS value FROM \"view\" v\n                INNER JOIN tabular vi ON v.view_id = vi.tabular_id\n                INNER JOIN namespace n ON vi.namespace_id = n.namespace_id\n                INNER JOIN warehouse w ON n.warehouse_id = w.warehouse_id\n            WHERE w.warehouse_id = $1 AND w.status = 'active'))\n            RETURNING value\n        )\n        SELECT $1 as \"statistics_id!\", $2 as \"warehouse_ident!\", (select value from update_tables) as \"number_of_tables!\", (select value from update_views) as \"number_of_views!\"\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "statistics_id!",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "warehouse_ident!",
        "type_info": "Uuid"
      },
      {
        "ordinal": 2,
        "name": "number_of_tables!",
        "type_info": "Int8"
      },
      {
        "ordinal": 3,
        "name": "number_of_views!",
        "type_info": "Int8"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid"
      ]
    },
    "nullable": [
      null,
      null,
      null,
      null
    ]
  },
  "hash": "86cd38aecc7c86bb6eb5fdbb3b4cb3a643e137374ffbf8c2a692c87b05a83a91"
}
