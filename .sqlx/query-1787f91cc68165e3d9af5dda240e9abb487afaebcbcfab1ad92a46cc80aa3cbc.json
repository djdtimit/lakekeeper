{
  "db_name": "PostgreSQL",
  "query": "\n        WITH cte as (\n            SELECT attempt >= $3 as should_fail\n            FROM task_instance\n            WHERE task_instance_id = $1\n        ),\n        cte2 as (\n            INSERT INTO task_instance_error_history (task_instance_id, task_instance_error_history_id, error_details) VALUES ($1, $2, $4)\n        )\n        UPDATE task_instance\n        SET status = CASE WHEN (select should_fail from cte) THEN 'failed'::task_status ELSE 'pending'::task_status END\n        WHERE task_instance_id = $1\n        ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid",
        "Int4",
        "Text"
      ]
    },
    "nullable": []
  },
  "hash": "1787f91cc68165e3d9af5dda240e9abb487afaebcbcfab1ad92a46cc80aa3cbc"
}
